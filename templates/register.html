{% extends "base.html" %}
{% block content %}
<h5 class="center-align">Register a New User</h5>
<div id="video-container" class="center-align">
    <img id="video-feed" src="/video_feed" alt="Video Feed" style="border: 2px solid #00796b; max-width: 100%; height: auto;">
</div>
<form id="registerForm" method="POST" action="/register">
    <div class="input-field">
        <input type="text" id="name" name="name" required>
        <label for="name">Name</label>
    </div>
    <div class="input-field">
        <input type="text" id="phone" name="phone" required>
        <label for="phone">Phone</label>
    </div>
    <button class="btn waves-effect waves-light blue" type="submit">
        Register
        
    </button>
</form>
<p id="registerMessage" class="red-text center-align"></p>
<script>
    document.getElementById("registerForm").addEventListener("submit", async (e) => {
        e.preventDefault();
        const formData = new FormData(e.target);
        const response = await fetch("/register", {
            method: "POST",
            body: formData
        });
        const result = await response.json();
        const messageElement = document.getElementById("registerMessage");
        if (result.status === "success") {
            messageElement.classList.remove("red-text");
            messageElement.classList.add("green-text");
            messageElement.innerText = result.message;
        } else {
            messageElement.classList.remove("green-text");
            messageElement.classList.add("red-text");
            messageElement.innerText = result.message;
        }
    });
</script>
{% endblock %}
